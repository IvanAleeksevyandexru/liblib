<div class="popup-wrapper">
  <div class="popup">
    <a class="close" (click)="onCancel()"></a>
    <p class="title-h2">{{'GIBDD.TITLE' | libTranslate}}</p>
    <lib-throbber *ngIf="loading"></lib-throbber>
    <ng-container *ngIf="!loading">
      <div class="gibdd-info flex-container-md mt-32 mb-24">
        <div class="details">
          <div class="mb-24">
            <p class="text-plain black bold mb-8">{{message.addParams.articleName}}</p>
            <p class="text-plain">{{'GIBDD.ARTICLE' | libTranslate}} {{message.addParams.articleCode}}</p>
          </div>
          <div class="mb-24">
            <p class="text-plain black bold mb-8">{{'GIBDD.DATE' | libTranslate}}</p>
            <p class="text-plain">{{formatDate()}}</p>
          </div>
          <div class="mb-24">
            <p class="text-plain black bold mb-8">{{'GIBDD.PLACE' | libTranslate}}</p>
            <p class="text-plain">{{details.offense}}</p>
          </div>
          <div class="mb-24">
            <p class="text-plain black bold mb-8">{{'GIBDD.NUMBER' | libTranslate}}</p>
            <p class="text-plain">{{'№ ' + details.docNum + ' от ' + details.docDate}}</p>
          </div>
          <div class="mb-24">
            <p class="text-plain black bold mb-8">{{'GIBDD.VEHICLE' | libTranslate}}</p>
            <p class="text-plain">{{details.carModel}}</p>
            <p *ngIf="details.stsNumber" class="text-plain">{{'СТС ' + details.stsNumber}}</p>
          </div>
          <div class="mb-24">
            <p class="text-plain black bold mb-8">{{'GIBDD.DIVISION' | libTranslate}}</p>
            <a href="{{details.offenseDivision}}" class="link-plain">{{details.offenseDivisionName}}</a>
          </div>
        </div>
        <div>
          <div class="map">
            <lib-map
              [redraw]="true"
              [center]="center"
              [zoom]="16"
              [elementId]="'map'"
              [controls]="['zoomControl']"
            ></lib-map>
          </div>
          <div *ngIf="photos" class="photos">
            <lib-image-slider [images]="photos" [showModal]="false"></lib-image-slider>
          </div>
        </div>
      </div>
      <ng-container *ngIf="message.addParams.amount">
        <p class="text-plain black bold mb-16">
          {{(message.addParams.linksFkNumber ? 'GIBDD.AMOUNT_DEBT' : 'GIBDD.AMOUNT_PENALTY') | libTranslate}}
        </p>
        <p *ngIf="message.addParams.amount" class="amount">{{message.addParams.amount.split('.')[0] + ' ₽'}}</p>
      </ng-container>
      <div class="button-wrapper">
        <lib-button size="md">
          {{(message.addParams.linksFkNumber ? 'GIBDD.PAY_DEBT' : 'GIBDD.PAY') | libTranslate}}
        </lib-button>
      </div>
    </ng-container>
  </div>
</div>

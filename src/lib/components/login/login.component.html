<div
  *ngIf="user.authorized; else loginLink"
  class="authorized-user flex-container justify-end align-items-center"
  (click)="toggleMenu.emit()"
>
  <lib-user-avatar
    [avatar]="avatar$ | async"
    [user]="user"
    [height]="38"
    [hideEdit]="true"
  ></lib-user-avatar>
  <a class="toggle-menu" [class.opened]="menuOpened$ | async"></a>

  <lib-counter class="counter-circle" [counter]="userCounter"></lib-counter>
</div>

<ng-template #loginLink>
  <ng-container *ngIf="useButton">
    <lib-button theme="light" (click)="login($event)">{{
      'HEADER.LOGIN_LINK' | libTranslate
    }}</lib-button>
    <lib-button theme="light" (click)="register($event)">{{
      'HEADER.REGISTER' | libTranslate
    }}</lib-button>
  </ng-container>

  <ng-container *ngIf="!useButton">
    <a
      [routerLink]=""
      *ngIf="!onlyIcon"
      (click)="login()"
      [class.partners_link]="loadService.config.viewType === 'PARTNERS'"
      [class.with-icon]="!onlyText"
      class="link"
      >{{ 'HEADER.LOGIN_LINK' | libTranslate }}</a
    >
    <div *ngIf="onlyIcon" (click)="login()" class="link"></div>
  </ng-container>
</ng-template>

<div class="search-field"
    [ngClass]="[contextClass ? contextClass : '']"
    [class.magnifying-glass-or-throbber-shown]="showMagnifyingGlass || searching"
    [class.clear-shown]="clearable && query"
    [ngStyle]="{width: $any(width)?.base || width, 'min-width': $any(width)?.min, 'max-width': $any(width)?.max}">
  <label [attr.for]="id" class="label-search-input">{{placeholder}}</label>
  <input #input
      type="text"
      [attr.id]="id ? id : null"
      [attr.name]="name ? name : null"
      [attr.tabIndex]="tabIndex ? tabIndex : '0'"
      [attr.maxlength]="maxlength"
      [attr.placeholder]="placeholder"
      class="search-input"
      [class.focused]="focused"
      [class.invalid]="invalidDisplayed"
      [class.shadowed]="showStaticContent && (!focused || forceShowStaticContent)"
      [value]="query"
      [disabled]="disabled"
      [readonly]="readOnly"
      [ngModel]="query"
      (input)="updateQuery($event.target.value)"
      (paste)="blockInputIfNeeded($event)"
      (keydown)="blockInputIfNeeded($event)"
      (focus)="notifyFocusEvent($event)"
      (blur)="notifyFocusEvent($event)"
      (keydown.enter)="runOrPostponeSearch(query, true, false)"
      (keydown.arrowright)="selectSuggestion()"/>
  <div class="static-content" (click)="setFocus()" *ngIf="showStaticContent"
    [class.shadowed]="focused && !forceShowStaticContent"
    [class.invalid]="invalidDisplayed"
    [class.focused]="focused"
    [class.disabled]="disabled">
    <div class="static-content-container">
      <ng-content></ng-content>
    </div>
  </div>
  <div class="suggestion-container" *ngIf="suggestion && focused && !forceShowStaticContent">
    <div class="suggestion-spacer">{{query}}</div>
    <div class="suggestion" [innerHTML]="suggestion | safeHtml"></div>
  </div>
  <div class="search-clear" [hidden]="!clearable || !query" [ngClass]="{'align-right': !showMagnifyingGlass && !searching}" (click)="clearSearch($event)"></div>
  <div class="search-go" [hidden]="!showMagnifyingGlass || searching" (click)="runOrPostponeSearch(query, false, true)" [ngClass]="{disabled: disabled}"></div>
  <div class="search-in-progress" *ngIf="searching && showSearching">
    <div class="search-in-progress-cell"></div>
  </div>
</div>

<div class="text-control masked-input" [ngClass]="contextClass ? [contextClass] : []"
    [class.withClearButton]="clearable && !disabled"
    [class.withTip]="questionTip && !(invalidDisplayed && validationMessages)"
    [class.withValidationError]="invalidDisplayed && validationMessages"
    (click)="returnFocus($event)">
  <div class="input-container plain-input">
    <input #input type="text"
      [attr.name]="name"
      [attr.id]="id ? id : null"
      [attr.tabIndex]="tabIndex"
      [attr.placeholder]="placeholder"
      [attr.autocomplete]="autocomplete === undefined ? null : autocomplete"
      [disabled]="disabled"
      [readOnly]="readOnly"
      class="text-input"
      [class.invalid]="invalidDisplayed"
      [class.focused]="focused"
      [class.uppercase]="uppercase"
      (blur)="notifyFocusEvent($event)"
      (focus)="notifyFocusEvent($event)"
      (input)="handleInput($event.target.value, $event)"
      (change)="handleChange($event.target.value, $event)"
      (keyup.enter)="forceChange()"
      (compositionstart)="compositionStart()"
      (compositionend)="compositionEnd($event.target.value)"/>
  </div>
  <div class="buttons-container">
    <div *ngIf="clearable && !disabled && !empty" (click)="clearValue($event)" class="clear-button"></div>
    <div class="validation-container" *ngIf="invalidDisplayed && validationMessages">
      <lib-invalid-results-tip
        [invalid]="invalid"
        [validation]="validation"
        [validationMessages]="validationMessages"
        [tipDirection]="tipDirection"
        [containerOverlap]="containerOverlap"
      ></lib-invalid-results-tip>
    </div>
    <div class="tip-container" *ngIf="questionTip && !(invalidDisplayed && validationMessages)">
      <lib-question-help-tip
        [tipDirection]="tipDirection"
        [questionTip]="questionTip"
        [containerOverlap]="containerOverlap"
      ></lib-question-help-tip>
    </div>
  </div>
</div>

#**Как запускать либу и лк в режиме watch mode:**

1. Отводим ветку от branch-prod-fed.
2. Заходим в папку dist/epgu-lib и из под этого пути в терминале выполняем npm link (отлинковать можно так: npm unlink).
3. Делаем сборку либы и одновременно watch: npm run lib-watch. 
   После того как сборка прошла запускаем команду npm run cp-lib-assets 
   (чтобы assets в dist подцепились - хорошо бы это сделать как-то по-другому - задача на подумать).
4. Открываем нужный проект, свою ветку, выполняем npm i (если нужно).
5. Из под корня epgu-app в терминале выполняем команду: npm link @epgu/epgu-lib
6. Запускаем проект как обычно (к примеру, app-server:serve и lk-client:serve)
7. Если все прошло успешно сейчас папка epgu-lib в node_modules должна смотреть на проект epgu-lib, тот, что в новом репозитории. 
   Меняем что-нибудь в проекте epgu-lib - выполняется автоматом била либы и изменения подтягиваются сразу в лк, так как там запущен serve и стоил link на epgu-lib
8. Поднятие версий либы работает абсолютно также, но из под проекта epgu-lib. 
   Папка epgu-lib в apgu-app более не нужна, поэтому я ее удалил в EPGUCORE-LIB.
   
#Правила публикации либы:
   В branch-prod-fed хранится продовская версия либы.
   
   Создание ветки для эпиков/тикетов:
   1. Отводимся от branch-prod-fed
   2. Правим либу
   3. Публикуем из ветки своей.
   
   Для вывода в прод:
   1. Мержим ветку в релизную ветку.
   2. Публикуем из релизной ветки.
   
   Публикация:
   
   Проверяем:
   1. что ветка собирается через ng build --project=epgu-lib, проверяем что ветка не содержит ошибок линта ng lint --project=epgu-lib.
   2. Повышаем версию либы: в package.json version (3 строчка), npm version +1 от текущей (например была 0.1.69 => ставим 0.1.70, текущую версию можно посмотреть командой npm view @epgu/epgu-lib versions --json)
   3. Билдим либу: npm run lib-build:prod
   4. Публикуем: переходим в dist/epgu-lib, выполняем npm publish
   5. Если в процессе публикации вылетела ошибка "Can not publish over existing version" - возвращаемся к п. 1
   6. Делаем коммит с указанием версии опубликованной либы и пуш. Пишем в чате что повысили версию либы.
   7. В проекте в папке epgu-app в package.json в devDependencies меняем версию ""epgu/epgu-lib" на ту, что вы только что опубликовали (например "epgu-lib": 0.1.70 как в примере выше).
   

#Переезд либы   
   ДЛЯ ПУБЛИКАЦИИ РАЗРАБОТЧИКАМИ:
   найти и изменить глобальный файл .npmrc
   
   @epgu:registry=http://nexus.gosuslugi.local/content/repositories/npm-internal/
   //nexus.gosuslugi.local/content/repositories/npm-internal/:_auth=bnBtOm5wbQ==
   
   изменить имя в package.json - добавить @epgu scope
   
   ДЛЯ УСТАНОВКИ ЗАВИСИМОСТЕЙ:
   в локальном проекте в файле .npmrc необходимо так же указать новый репозиторий для скачивания новых версий
   
   @epgu:registry=http://nexus.gosuslugi.local/content/groups/group-npm/
   
   в хосты надо будет добавить строчку 
   10.81.3.13 nexus.gosuslugi.local
